# Google Cloud Vision OCR Configuration
# Add these variables to your .env file to enable OCR functionality

# Enable/disable OCR feature
GOOGLE_CLOUD_VISION_ENABLED=true

# Google Cloud Project ID
# Get from: https://console.cloud.google.com/project
GOOGLE_CLOUD_PROJECT_ID=your-project-id-here

# Google Cloud Authentication
# Choose ONE of the two methods below:

# METHOD 1: JSON Credentials directly in .env (RECOMMENDED)
# Copy the entire contents of your service account JSON key file here
# Format: {"type": "service_account", "project_id": "...", ...}
# You can also use base64 encoded version for cleaner .env
GOOGLE_CLOUD_CREDENTIALS={"type":"service_account","project_id":"your-project-id","private_key_id":"key-id","private_key":"-----BEGIN PRIVATE KEY-----\nMIIEv...-----END PRIVATE KEY-----\n","client_email":"service-account@project.iam.gserviceaccount.com","client_id":"123456789","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/service-account%40project.iam.gserviceaccount.com"}

# METHOD 2: Key file path (Alternative)
# Path to Google Cloud Service Account JSON key file
# Download from: APIs & Services → Credentials → Service Accounts
# For development: storage/keys/gcp-service-account.json
# For production: Use secure storage or AWS Secrets Manager
# NOTE: Leave empty if using METHOD 1 above
GOOGLE_CLOUD_KEY_FILE=/path/to/service-account-key.json

# OCR Processing Settings

# Maximum file size for OCR processing (in bytes)
# Default: 20971520 (20MB)
# Adjust based on your API quotas and network
OCR_MAX_FILE_SIZE=20971520

# Language hints for better OCR accuracy
# Comma-separated list of language codes (e.g., 'en,es')
# Common codes: en (English), es (Spanish), fr (French), de (German), it (Italian), etc.
OCR_LANGUAGE_HINTS=en

# Minimum confidence threshold for text detection (0.0 - 1.0)
# 0.7 = 70% confidence required
# Higher values = more accurate but may skip low-confidence text
OCR_MIN_CONFIDENCE=0.7

# Enable caching of OCR results
# Reduces API calls for identical receipts
OCR_CACHE_RESULTS=true

# Cache TTL in seconds (3600 = 1 hour)
OCR_CACHE_TTL=3600

# Maximum concurrent OCR requests
# Prevents overwhelming Google Cloud API
OCR_MAX_CONCURRENT=5

# Plan-based OCR Limits (optional overrides)
# These are configured in config/googlecloud.php
# You can override here if needed

# Free plan: monthly and daily limits
OCR_FREE_MONTHLY_LIMIT=5
OCR_FREE_DAILY_LIMIT=2

# Trip Pass plan limits
OCR_TRIP_PASS_MONTHLY_LIMIT=100
OCR_TRIP_PASS_DAILY_LIMIT=20

# Lifetime plan limits (set to high number for unlimited)
OCR_LIFETIME_MONTHLY_LIMIT=999999
OCR_LIFETIME_DAILY_LIMIT=999999

# Logging and Monitoring

# Enable detailed OCR logging
# Logs to storage/logs/laravel.log
OCR_DEBUG_LOGGING=false

# Enable OCR metrics collection
# Tracks extraction accuracy and API performance
OCR_COLLECT_METRICS=true

# API Quota Settings (optional)

# Monthly API call quota for Vision API
# Get from Cloud Console: APIs & Services → Vision API → Quotas
# Set to 0 for unlimited (billing required)
VISION_API_MONTHLY_QUOTA=1000

# Alert when usage exceeds X% of quota
VISION_API_ALERT_THRESHOLD=80

# Performance Tuning

# Image compression quality (1-100)
# Lower = faster processing but lower quality
# Higher = better quality but slower
OCR_IMAGE_QUALITY=85

# Timeout for OCR API requests (seconds)
OCR_API_TIMEOUT=30

# Retry attempts on API failure
OCR_RETRY_ATTEMPTS=3

# Delay between retries (milliseconds)
OCR_RETRY_DELAY=1000
